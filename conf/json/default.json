{
  "description": "Default Rancher template",
  "name": ":build_name",
  "output_dir": "packer_templates/:build_name",
  "source_dir": "packer_resources",
  "include_component_string": "true",
  "min_packer_version": "0.7.0",
  "builder_types": [
    "virtualbox-iso",
    "vmware-iso"
  ],
  "post_processor_types": [
    "vagrant"
  ],
  "provisioner_types": [
    "shell"
  ],
  "builders": {
    "common": {
      "settings": [
        "boot_command = boot.command",
        "boot_wait = 10s",
        "disk_size = 40000",
        "guest_os_type=",
        "headless = true",
        "http_directory = http",
        "iso_checksum_type = sha256",
        "output_directory = :output_dir",		
        "shutdown_command = shutdown.command",
        "ssh_password = packer",
        "ssh_port = 22",
        "ssh_username = packer",
        "ssh_wait_timeout = 5m",
        "vm_name = :build_name"
      ]
    },
    "virtualbox-iso": {
      "settings": [
        "guest_additions_path = VBoxGuestAdditions_{{ .Version }}.iso",
        "virtualbox_version_file = .vbox_version"
      ],
      "arrays": {
        "vboxmanage": [
          "cpus=1",
          "memory=1024"
        ]
      }
    },
    "vmware-iso": {
      "settings": [
        "guest_additions_path = VBoxGuestAdditions_{{ .Version }}.iso",
        "virtualbox_version_file = .vbox_version"
      ],
      "arrays": {
         "modifyvm": [
         "cpus=1",
         "memory=1024"
        ]	
      }
    }
  },
  "post_processors": {
    "vagrant": {
      "settings": [
        "compression_level = 9",
        "keep_input_artifact = false",
        "output =  :build_name.box"
      ]
    }
  },
  "provisioners": {
    "shell": {
      "settings": [
        "execute_command = execute.command"
      ],
      "arrays": {
        "scripts": [
          "setup.sh",
          "vagrant.sh",
          "sudoers.sh",
          "cleanup.sh"
        ]
      }
    }
  }
}
